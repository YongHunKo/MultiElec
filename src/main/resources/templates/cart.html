<meta charset="utf-8">
<style>
	table > tbody > tr > td > img {
		width:100px;
	} 
	table > tbody > tr > td > img:hover {
		width:99px;
		border:1px solid #FE6B00;
	} 
.btn:hover{
background-color: #FE6B00;
color:white;
	}
	
</style>

<script>
function del(cartid){
	var custid = '[[${session.logincust.custid}]]';
	var c = confirm('삭제 하시겠습니까 ?');
	if(c == true){
		location.href='/deletecart?id='+cartid+'&custid='+custid;
	}
}

$(document).ready(function(){
	
	var rowCnt = 0;
	
	var col1Idx = 0;	// 첫번째 col index
	
	var col1Sum = 0;	// 첫번째 col sum
	
	// loop row
	$("#tbl_data tr").each(function(){
	    // 첫번째 줄 건너뜀
		if( rowCnt != 0 ){
			// td dom 객체를 얻어옴
			var sell = $(this).children("td");
			// loop col
			$(sell).each(function(){
				var idx = $(this).index();
				var val = $(this).text();
				
				if( idx == col1Idx ){
					col1Sum += parseInt(val); 
				}else if( idx == col2Idx ){
					col2Sum += parseInt(val);
				}else if( idx == col3Idx ){
					col3Sum += parseInt(val);
				}
			});
	    }
		rowCnt++;
	});
	// 합계를 출력
	$("#a_sum").text(col1Sum);

});
</script>


<div class="container-fluid">
  <h2>장바구니</h2>    
  <table class="table table-hover">
    <thead>
      <tr>
      	<th>No</th>
        <th>Image</th>
        <th>Item Name</th>
        <th>Price</th>
        <th>Count</th>
        <th>	
        	<button type="button" class="btn btn-sm">
          	<a th:href="@{/payment(id=${custdetail.custid})}"><span class="material-icons-outlined color">credit_card</span>구매하기</a>
        	</button>
         </th>	
      </tr>
    </thead>
    <tbody>
      <tr th:each="c : ${mycart}">
        <td id="cartid" th:text="${c.cartid}">NO</td>
        <td> <img th:src="'/img/item/'+${c.img}"> </td>
        <td th:text="${c.itemname}">Item Name</td>
        <td th:text="${c.price}">Price</td>
        <td th:text="${c.cnt}">Count</td>
        <td> 
        	<button type="button" th:onclick="del([[${c.cartid}]]);" class="btn btn-sm" >
          		<span class="material-icons">delete</span>삭제하기
        	</button>
        </td>
      </tr>
    </tbody>
		<div class="container-fluid">
			<table id="tbl_data" class="table">
				<thead>
					<tr>
						<td colspan="2">합계 금액 :</td>
					</tr>
				<tbody>
					<tr style="display: none" th:each="ca : ${mypricecart}">
						<td th:text="${ca.totalprice}">합계금액</td>
					</tr>
				</thead>
			</table>
			</body>
			<table>
				<tr>
					<td id="a_sum"></td>
				</tr>
			</table>
		</div>
		</body>
		</html>